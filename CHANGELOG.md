# Changelog – Glyph.Flow

## [v0.1.0a7] – 2025-08-28

### ✨ Added

### 🔧 Improved
- Fixed the error on startup without a data file.

### 🐛 Known Limitations
- Undo/redo not yet implemented.
- Manual command input only – no TUI or keybindings yet
- Import/export of node trees missing.
- Panel animations may flicker on some terminals under Windows.
- Preparing a pixelart logo uses a temporary solution.

---

## [v0.1.0a7] – 2025-08-28
- Fixed the error on startup without a data file.

---

## [v0.1.0a6] – 2025-08-28

### ✨ Added
- Implemented **dual-log system**:
  - `log` for system/runtime messages.
  - `presenter` for visual command outputs.
  Both are independently configurable and reflow-aware.
- Introduced **GlyphRichLog** with buffer + dynamic rewrap on resize.
- Added **animated panel adjustment** (`action_adjust`) to toggle log/output panel widths.
- Added a new header with live configuration info and a pixelart logo generated by an image with `rich-pixels`.

### 🔧 Improved
- Separated autosave logic: now data and config will be saved separately depending on the results of the commands.
- Enhanced schema handling: `NodeSchema` now dynamically reloads from `config` on every command input.
- Smarter command parsing: support for default values, option aliases and schema-based validation.
- Clean separation of system log (status/errors) vs. presenter log (command results).
- Added more conditional check to 'create_handler' to avoid unexpectd errors.
- Solved node ID creation issue: now IDs will be automatically created and rearranged when a node is deleted.

### 🐛 Known Limitations
- Undo/redo not yet implemented.
- Manual command input only – no TUI or keybindings yet
- Import/export of node trees missing.
- Panel animations may flicker on some terminals under Windows.
- Preparing a pixelart logo uses a temporary solution.

---

## [v0.1.0a5] – 2025-08-22

### ✨ Added
- Introduced the new **Command Registry** system: all commands are now declaratively defined in `registry.py`.
- Added `command_factory.py` to parse raw input into a `Command` object with params, handlers and messages.
- Refactored every command using the registry, with full support for positionals, options and defaults.
- Added support for command-specific usage messages resolved through the registry.
- Added 'config' command to switch settings (autosave, confirmation requests and logging).

### 🔧 Improved
- **Massive cleanup**: `app.py` reduced from ~630 lines to ~112 lines; command dispatch fully separated from UI. Ready for TUI development.
- Unified error handling and logging via registry-driven command specs.
- Autosave and mutation handling standardized at command-level.
- Command addition now requires only a registry entry + handler function.
- `clearall` command refactor: no parameters, delete all data

### 🐛 Known Limitations
- No undo/redo system.
- Manual command input only – no TUI or keybindings yet
- No export/import feature.
- The `create` command recommends to create None if an attempt is made to create an element at a level deeper than the existing scheme.
- The system tends to generate IDs incorrectly when generating a sample tree. (id counter issue)

---

## [v0.1.0a4] – 2025-08-19

### ✨ Added
- Introduced layered and leveled logging and internal messaging system with buffer prepared for lcalization.
- All commands in `app.py` migrated to use the new logging system (except view outputs).
- Added `CommandHistory` module with arrow-key navigation.
- Foundation for upcoming Command Registry system.

### 🔧 Improved
- More efficient internal and external log management.
- Minor changes in the backend, preparation for a complete separation from the frontend.

### 🐛 Known Limitations
- No undo/redo system
- Manual command input only – no TUI or keybindings yet
- No export/import feature.

---

## [v0.1.0a3] – 2025-08-16

### ✨ Added
- Added autosave feature and `autosave <on/off>` command.
- Added `config.json` to store settings and basic information.
- Added `content_styler.py` for unified log message formatting (INFO, WARN, ERROR, SUCCESS).  
  Preparing to support localized messaging

### 🔧 Improved
- The first message now displays the version number and the status of the autosave setting.
- All log outputs now use consistent formatting instead of inline Rich markup.

### 🐛 Known Limitations
- No undo/redo system
- No system message buffer/logging
- No localized messaging system.
- Manual command input only – no TUI or keybindings yet
- No export/import feature.

---

### ✨ Added
- `edit` command to modify existing nodes (name, short/full description, deadline) via flags.
- `search` command with::
  - `search <substring>` / `search name <substring>` → case-insensitive name search.
  - `search id <prefix>` → ID-based search (exact or prefix match).
  - Results displayed in a compact Rich table.
- `clearall` command with confirmation:
  - `clearall mem` → clear in-memory nodes.
  - `clearall file` → delete saved data file.
  - `clearall both` → clear memory and delete file.
- Expanded `confirm` and `abort` command to confirm or cancel clearall operations.

### 🔧 Improved
- Help text now loaded from external file for easier editing.
- Unified argument parsing for new commands.

### 🐛 Known Limitations
- No undo/redo system
- No system message buffer/logging
- Manual command input only – no TUI or keybindings yet

---

## [v0.1.0a1] – 2025-08-11

### ✨ Added
- Core `Node` class with:
  - Hierarchical ID generation (root and child IDs)
  - Support for parent/child trees
  - Progress tracking logic
- `NodeSchema` to enforce allowed type hierarchies
- `parser.py` to support `create` commands with optional flags
- `data_io.py` to save/load JSON trees and provide sample data
- TUI app (`NodeTestApp`) with the following commands:
  - `sample`, `ls`, `tree`, `ascii`, `table`
  - `create`, `delete`, `confirm delete`, `abort delete`
  - `toggle` command with improved logic to preserve manually set states
  - `save`, `load`, `schema`
- Colored output and structured tree display
- Table-based node rendering via `rich.table`
- Help command with usage examples
- Warning messages when executing view commands on empty data

### 🔧 Improved
- Root ID counter now adjusts automatically after loading data
- Refactored `toggle_all` to avoid overriding manually changed child states
- Minor UX improvements in command feedback and error messages

### 🐛 Known Limitations
- No `edit`, `move` or `find` support yet
- No undo/redo system
- No system message buffer/logging
- Manual command input only – no TUI or keybindings yet

---

## [Unreleased]

### 🚧 Planned
- Full migration into standalone Textual app (beyond console testing)
- Detailed TUI interface with main menu, project view, settings, and changelog
- Enhanced editing and moving of nodes
- Stats and progress overview
- Undo system
- Logging recent commands / state changes
